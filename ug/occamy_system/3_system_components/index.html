
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../2_addrmap/">
      
      
        <link rel="next" href="../4_clocking/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.16">
    
    
      
        <title>System Components - Snitch</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.26e3688c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#system-components-description" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Snitch" class="md-header__button md-logo" aria-label="Snitch" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Snitch
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              System Components
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pulp-platform/snitch" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    pulp-platform/snitch
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Snitch" class="md-nav__button md-logo" aria-label="Snitch" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Snitch
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pulp-platform/snitch" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    pulp-platform/snitch
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../benchmarking/" class="md-nav__link">
        Benchmarking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../setup-iis/" class="md-nav__link">
        Tooling Setup at IIS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example_trace.html" class="md-nav__link">
        Trace Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../directory_structure/" class="md-nav__link">
        Directory Structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../documentation/" class="md-nav__link">
        Documentation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Systems
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Systems
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
      
      
      
        <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
          Snitch Cluster
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Snitch Cluster
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../snitch_cluster/" class="md-nav__link">
        Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../schema-doc/snitch_cluster/" class="md-nav__link">
        Schema
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          Occamy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Occamy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../occamy.md" class="md-nav__link">
        Guide
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
          Architecture
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_2_2">
          <span class="md-nav__icon md-icon"></span>
          Architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1_overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2_addrmap/" class="md-nav__link">
        Address Map
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          System Components
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        System Components
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#harts" class="md-nav__link">
    Harts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#occamy-toplevel" class="md-nav__link">
    Occamy Toplevel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acceleration-groups-and-cluster" class="md-nav__link">
    Acceleration Groups and Cluster
  </a>
  
    <nav class="md-nav" aria-label="Acceleration Groups and Cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#group" class="md-nav__link">
    Group
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constant-cache" class="md-nav__link">
    Constant Cache
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tlbs" class="md-nav__link">
    TLBs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster" class="md-nav__link">
    Cluster
  </a>
  
    <nav class="md-nav" aria-label="Cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cluster-memories" class="md-nav__link">
    Cluster Memories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dma" class="md-nav__link">
    DMA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fpu" class="md-nav__link">
    FPU
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster-peripherals" class="md-nav__link">
    Cluster Peripherals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serial-link" class="md-nav__link">
    Serial Link
  </a>
  
    <nav class="md-nav" aria-label="Serial Link">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#die-2-die-wide" class="md-nav__link">
    Die-2-Die (Wide)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#die-2-die-narrow" class="md-nav__link">
    Die-2-Die (Narrow)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fpga-off-system-link" class="md-nav__link">
    FPGA / Off-System Link
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cva6" class="md-nav__link">
    CVA6
  </a>
  
    <nav class="md-nav" aria-label="CVA6">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#physical-memory-attributes-pmas" class="md-nav__link">
    Physical Memory Attributes (PMAs)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#axi-interface" class="md-nav__link">
    AXI Interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#temporal-fence-instruction" class="md-nav__link">
    Temporal Fence Instruction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-level-dma" class="md-nav__link">
    System-level DMA
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-memories" class="md-nav__link">
    System Memories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#axi-crossbars" class="md-nav__link">
    AXI crossbar(s)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#peripherals" class="md-nav__link">
    Peripherals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#soc-control-registers" class="md-nav__link">
    SoC Control Registers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chip-control-registers" class="md-nav__link">
    Chip Control Registers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#control-register-files-overview" class="md-nav__link">
    Control Register Files Overview
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../4_clocking/" class="md-nav__link">
        Clocking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../5_interrupts_and_synchronization.md" class="md-nav__link">
        Interrupts and Synchronization
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../schema-doc/occamy/" class="md-nav__link">
        Schema
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Reference Manual
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Reference Manual
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../rm/snitch/" class="md-nav__link">
        Snitch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../rm/snitch_cluster/" class="md-nav__link">
        Snitch Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../rm/reqrsp_interface/" class="md-nav__link">
        Reqrsp Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../rm/custom_instructions/" class="md-nav__link">
        Custom Instructions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Snitch Runtime
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Snitch Runtime
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../runtime/Pages/" class="md-nav__link">
        Pages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../runtime/Files/" class="md-nav__link">
        Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../runtime/Classes/" class="md-nav__link">
        Classes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../runtime/Examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../runtime/Modules/" class="md-nav__link">
        Modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../runtime/Namespaces/" class="md-nav__link">
        Namespaces
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../publications/" class="md-nav__link">
        Publications
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#harts" class="md-nav__link">
    Harts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#occamy-toplevel" class="md-nav__link">
    Occamy Toplevel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acceleration-groups-and-cluster" class="md-nav__link">
    Acceleration Groups and Cluster
  </a>
  
    <nav class="md-nav" aria-label="Acceleration Groups and Cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#group" class="md-nav__link">
    Group
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constant-cache" class="md-nav__link">
    Constant Cache
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tlbs" class="md-nav__link">
    TLBs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster" class="md-nav__link">
    Cluster
  </a>
  
    <nav class="md-nav" aria-label="Cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cluster-memories" class="md-nav__link">
    Cluster Memories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dma" class="md-nav__link">
    DMA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fpu" class="md-nav__link">
    FPU
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster-peripherals" class="md-nav__link">
    Cluster Peripherals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serial-link" class="md-nav__link">
    Serial Link
  </a>
  
    <nav class="md-nav" aria-label="Serial Link">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#die-2-die-wide" class="md-nav__link">
    Die-2-Die (Wide)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#die-2-die-narrow" class="md-nav__link">
    Die-2-Die (Narrow)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fpga-off-system-link" class="md-nav__link">
    FPGA / Off-System Link
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cva6" class="md-nav__link">
    CVA6
  </a>
  
    <nav class="md-nav" aria-label="CVA6">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#physical-memory-attributes-pmas" class="md-nav__link">
    Physical Memory Attributes (PMAs)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#axi-interface" class="md-nav__link">
    AXI Interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#temporal-fence-instruction" class="md-nav__link">
    Temporal Fence Instruction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-level-dma" class="md-nav__link">
    System-level DMA
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-memories" class="md-nav__link">
    System Memories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#axi-crossbars" class="md-nav__link">
    AXI crossbar(s)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#peripherals" class="md-nav__link">
    Peripherals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#soc-control-registers" class="md-nav__link">
    SoC Control Registers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chip-control-registers" class="md-nav__link">
    Chip Control Registers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#control-register-files-overview" class="md-nav__link">
    Control Register Files Overview
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="system-components-description">System Components Description</h1>
<h2 id="harts">Harts</h2>
<p>Every core in the system is associated to a unique RISC-V hart (hardware thread), identified by a unique index.</p>
<p>The CVA6 core is assigned hart ID 0.</p>
<p>The Snitch cores are hierarchically distributed across 6 groups, each containing 4 clusters, each in turn containing 9 cores. The group, cluster and core IDs in this hierarchical subdivision are used to calculate the hart ID:</p>
<div class="highlight"><pre><span></span><code>   hart_id = group_id * 4 + cluster_id * 9 + core_id + 1
</code></pre></div>
<h2 id="occamy-toplevel">Occamy Toplevel</h2>
<p>The Occamy architecture includes <em>six groups</em> each containing <em>four clusters</em>.</p>
<p><img alt="Screenshot" src="../figures/occamy.drawio.png" /></p>
<h2 id="acceleration-groups-and-cluster">Acceleration Groups and Cluster</h2>
<h3 id="group">Group</h3>
<p>A group contains four <em>Snitch clusters</em>, a <em>Constant Cache</em>, and a Zero Memory.
There are two crossbars for narrow 64-bit accesses used the <em>Snitch LSU</em> and the wide 512-bit AXI bus used by the <em>instruction caches</em> and the <em>DMA</em>.
The group is a standalone clock-gated and reset domain and both narrow and wide AXI ports can be isolated.</p>
<p><img alt="Screenshot" src="../figures/group.drawio.png" /></p>
<p>The group and its components can be controlled via the :ref:<code>group_control_registers</code>, which are <em>SoC-clocked</em> and <em>SoC-reset</em> to provide reset, gating, and isolation control at all times.</p>
<h3 id="constant-cache">Constant Cache</h3>
<p>The constant cache can be dis-/en-abled and configured via the <code>group_control_registers</code>.</p>
<h3 id="tlbs">TLBs</h3>
<p>Each group features two independent TLBs, one for their narrow and one for their wide interface.
They can be enabled, disabled, and configured via the <code>group_control_registers</code>. Accordingly, TLB configuration is system-reset, externally accessible while the group is clock-gated, and persists through internal group resets.</p>
<p>After SoC reset, both TLBs are bypassed, passing all internal requests to the external NoC without filtering or translation. This can be toggled by the <code>TLB_WIDE_ENABLE</code> and <code>TLB_NARROW_ENABLE</code> registers, respectively.</p>
<p>The TLBs are passive, meaning that their page tables are intended to be explicitly programmed before use. This can be done by the CVA6 host or by the group cores themselves if the TLB is bypassed or its registers are mapped in the narrow TLB's page table beforehand. Thus, the host can reserve full control of the memory mapping of each group or delegate it as needed.</p>
<p>Both TLBs provide eight entries, each of which consists of an aligned block of registers. The first three register pairs encode three 36-bit page numbers required to address our 48-bit address space:</p>
<ul>
<li><code>PAGEIN_FIRST</code>: The <em>first</em> page of this entries' <em>mapped input range</em></li>
<li><code>PAGEIN_LAST</code>: The <em>last</em> page of this entries' <em>mapped input range</em></li>
<li><code>PAGEOUT_BASE</code>: The <em>base</em> page of this entries' <em>output range</em></li>
</ul>
<p>Additionally, each entry has a seventh <code>FLAGS</code> register, with a <code>valid</code> bit indicating whether this entries' mapping is active and a <code>read_only</code> bit indicating whether writes to this region are permitted or blocked.</p>
<p>When a request enters a non-bypassed TLB, it's base address' page will be matched against all active entries, with <em>lower entry indices taking precedence</em>. If a match is found, the address' page number will be replaced with the entries' <code>PAGEOUT_BASE</code>. If no match is found or the request is a write to a read-only region, <em>an AXI error response is returned</em> and the request <em>does not pass through the TLB</em>.</p>
<p><strong><em>Note:</em></strong> The group cores are <em>not</em> designed to handle AXI error responses in general, and their behavior is generally undefined in this case. Thus, the programmer <em>must</em> correctly configure any accessed external range in the TLBs before running code on group cores that accesses these memory regions.</p>
<h3 id="cluster">Cluster</h3>
<p>A cluster contains eight worker <em>Snitch Cores</em>, each of which combines a small integer core, a trace L0 instruction cache, and a large double-precision Floating Point Unit (FPU) kept busy with the <em>SSR</em> and <em>FREP</em> extensions.
An additional ninth Snitch Core controls a cluster-level <em>DMA engine</em> and can be used for cluster coordination. The DMA-core has a smaller configuration FPU.
All cores share a tightly-coupled 128 KiB L1 SPM. The Snitch Cores also share a two-way 8KiB L1 instruction cache and an integer Multiply Divide Unit (MulDiv).
Finally, the DMA engine and L1 instruction cache share a duplex 512-bit AXI crossbar connection to the global memory system, which all Snitch cores can access through a 64-bit secondary AXI crossbar; both crossbars are internally connected for convenience.</p>
<p><img alt="Screenshot" src="../figures/cluster.drawio.png" /></p>
<h4 id="cluster-memories">Cluster Memories</h4>
<p>A cluster contains a <strong>128 KiB TCDM</strong> acting as a software-managed L1 cache.
The TCDM is divided into 32 memory banks, each 64 bit wide, via a single-cycle SPM interconnect.
Each core has four 64-bit ports to the TCDM to achieve full utilization on all three SSR streams.
Blocks of eight banks form superbanks, which are accessed in parallel by the 512-bit DMA engine through a secondary wide interconnect.</p>
<p>Each cluster contains <strong>64KiB of Zero Memory</strong>.
The Zero Memory is a memory where all read access are returning 0-data and all writes are accepted without an actual data write happening.</p>
<h4 id="dma">DMA</h4>
<p>The ninth Snitch core in the cluster is used for DMA transfers and/or worker cores coordination. It features a tightly-coupled DMA engine that can be controlled with custom ISA extensions. The DMA transfers can be issued asynchronously with the ISA extensions and the DMA supports a configurable number of outstanding DMA transfers. The DMA issues burst-based AXI transfers on the wide 512-bit AXI interconnect. The AXI bus is connected to the cluster crossbar from where a transaction can either be directed to the TCDM or out to the global memory system. The DMA also features a HW extension that allows to issue 2D transfers that are automatically remapped to 1D transfers.Â </p>
<h4 id="fpu">FPU</h4>
<p>The FP-SS, bundles an IEEE-754 compliant FPU with a 32x64 bit registerfile. The FP-SS has its own dedicated scoreboard where it keeps track of all registers in a similar fashion to the integer core. Operations without dependencies can be issued back to back. In addition to the FPU it also contains a separate LSU dedicated to loading and storing floating-point data from/to the floating-point RF, the address calculation is performed in the integer core, which significantly reduces the area of the LSU. Furthermore, the Snitch-CC contains three SSRs  (2.1.1 SSR) which map, upon activation through a CSR write, registers ft0, ft1 and ft2 to memory streams.
The FPU is parameterizable in supported precision and operation latency. All floating-point operations are fully pipelined (with possibly different pipeline depths).</p>
<p>Supports the following number formats:</p>
<table>
<thead>
<tr>
<th>Format</th>
<th>Total Bitwidth</th>
<th>Exponent Width</th>
<th>Mantissa Width</th>
</tr>
</thead>
<tbody>
<tr>
<td>IEEE binary64 (double)</td>
<td>64</td>
<td>11</td>
<td>52</td>
</tr>
<tr>
<td>IEEE binary32 (single)</td>
<td>32</td>
<td>8</td>
<td>23</td>
</tr>
<tr>
<td>IEEE binary16 (half)</td>
<td>16</td>
<td>5</td>
<td>10</td>
</tr>
<tr>
<td>custom binary16alt (bfloat16)</td>
<td>16</td>
<td>8</td>
<td>7</td>
</tr>
<tr>
<td>custom binary8</td>
<td>8</td>
<td>5</td>
<td>2</td>
</tr>
<tr>
<td>custom binary8alt</td>
<td>8</td>
<td>4</td>
<td>3</td>
</tr>
</tbody>
</table>
<p>The Occamy FPU is a modular design containing hardware units dedicated to each operation group. The enabled operation groups are: ADDMUL (fma, add, mul, ...), CAST (conversions), COMP (comparison), SDOTP (dot products). The support for FP division and square root has been disabled as such instructions will not often be used in the application scenarios targeted by Occamy. If FP division and square root are needed, they can be software emulated on the integer datapath.</p>
<p>ADDMUL, CAST, and COMP operations can work on all the enabled formats. In contrast, SDOTP only targets low-mixed-precision operations.</p>
<p>The ADDMUL operation group block contains: (i) one 64-bit FMA, (ii) one 32-bit FMA, (iii) two 16-bit FMAs, (iv) four 8-bit FMAs. Larger-precision units support lower-precision computations. That means that per FPU, one FP64 FMA/cycle, two FP32 FMA/cycle, four FP16 FMA/cycle, four FP16ALT FMA/cycle, eight FP8 FMA/cycle, or eight FP8ALT FMA/cycle can be computed.</p>
<p><img alt="Screenshot" src="../figures/fpu_fma.drawio.png" /></p>
<p>The SDOTP operation group block contains two 16-to-32-bit ExSdotp (expanding sum of dot products) units and two 8-to-16-bit ExSdotp units. ExSdotp operations can be performed on operands expressed in FP8/FP8ALT/FP16/FP16ALT and using an accumulator which is expressed with twice as many bits (e.g. source format FP8ALT, accumulator format FP16). Larger precision units support lower-precision computations as well; thus two 16-to-32-bit ExSdotp per cycle per FPU can be carried out, or four 8-to-16-bit ExSdotp per cycle per FPU.</p>
<p><img alt="Screenshot" src="../figures/fpu_sdotp.drawio.png" /></p>
<p>The CAST operation group block contains a single unit capable of performing all the conversions.
The COMP operation group block contains (i) one FP64 unit, (ii) two FP32 units, (iii) four FP16 units, (iv) four FP16ALT units, (v) eight FP8 units, (vi) eight FP8ALT units.</p>
<p>Each operation group block contains a parameterized pipeline depth: 3 sets of pipeline registers are used for ADDMUL and SDOTP, 2 for CONV, and 1 for COMP.</p>
<p>To sum up:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Latency [cycle]</th>
<th>Throughput per FPU [output/cycle]</th>
</tr>
</thead>
<tbody>
<tr>
<td>FP64 FMA</td>
<td>4</td>
<td>1</td>
</tr>
<tr>
<td>FP32 FMA</td>
<td>4</td>
<td>2</td>
</tr>
<tr>
<td>FP16/FP16ALT FMA</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>FP8/FP8ALT FMA</td>
<td>4</td>
<td>8</td>
</tr>
<tr>
<td>All conversions</td>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>FP64 Comparisons</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>FP32 Comparisons</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>FP16/FP16ALT Comparisons</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>FP8/FP8ALT Comparisons</td>
<td>2</td>
<td>8</td>
</tr>
<tr>
<td>FP16/FP16ALT-to-FP32 ExSdotp</td>
<td>4</td>
<td>2</td>
</tr>
<tr>
<td>FP8/FP8ALT-to-FP16/FP16ALT ExSdotp</td>
<td>4</td>
<td>4</td>
</tr>
</tbody>
</table>
<p><img alt="Screenshot" src="latex/minifloat-nn.png" /></p>
<h4 id="cluster-peripherals">Cluster Peripherals</h4>
<p>Each cluster hosts the following set of peripherals, accessible from the 64-bit AXI crossbar:</p>
<ul>
<li>Performance counters</li>
<li>Cluster CLINT</li>
<li>Hardware barrier unit</li>
<li>Shared control and status registers (CSRs)</li>
</ul>
<p>The hardware barrier unit is described in <code>synchronization</code>. The cluster CLINT is described in <code>interrupts</code>.</p>
<p>The cluster peripherals are memory-mapped in the <code>PERIPHERAL</code> region of each cluster's address space.</p>
<h2 id="serial-link">Serial Link</h2>
<p>Occamy features multiple custom serial link interfaces to connect the two dies together as well as to provide a connection to a host system like an FPGA.
The serial link is a simple all-digital Double-Data-Rate (DDR) link with a source-synchronous interface. The link is scalable in terms of number of channels and lanes and occur in different configurations in Occamy.
The Link has an AXI4 interface and implements Network, Data Link and Physical Layer.</p>
<p><img alt="Screenshot" src="../figures/serial_link.png" /></p>
<h3 id="die-2-die-wide">Die-2-Die (Wide)</h3>
<p>The wide Serial Link is the main Die-2-Die link which is used to transfer large amount of data from one die to the other die with the DMAs in Occamy.
It is connected to the wide 512-bit AXI interconnect of the system.
The wide Serial Link has a relatively high bandwidth due the large number of channels. The exact configuration is shown below.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>#Channels</td>
<td>38</td>
</tr>
<tr>
<td>#Lanes</td>
<td>8</td>
</tr>
<tr>
<td>#Wires</td>
<td>684</td>
</tr>
<tr>
<td>Max I/O clock frequency</td>
<td>250 MHz (default 125 MHz)</td>
</tr>
<tr>
<td>Max Bandwidth (duplex)</td>
<td>304 Gbps @ 250 MHz</td>
</tr>
</tbody>
</table>
<p>Transfers over the Wide Serial Link to the other die can be done by issuing DMA requests where the MSB+1 (used bits) of the address is set i.e. adding an offset off <code>0x100_0000_0000</code>. The entire address space of the other die is accessible this way.</p>
<table>
<thead>
<tr>
<th></th>
<th>Address</th>
</tr>
</thead>
<tbody>
<tr>
<td>Configuration register base address</td>
<td><code>0x0600_0000</code></td>
</tr>
<tr>
<td>Start address</td>
<td><code>0x100_0000_0000</code></td>
</tr>
<tr>
<td>End address</td>
<td><code>0x1ff_ffff_ffff</code></td>
</tr>
</tbody>
</table>
<p>The AXI interface of the Wide Serial Link can be isolated with its <code>SERIAL_LINK_CTRL</code> register. Further the Wide Serial Link can be SW reset and clock gated.</p>
<h3 id="die-2-die-narrow">Die-2-Die (Narrow)</h3>
<p>The narrow Serial Link is connected to the narrow AXI interface of Occamy.
It can be used to transfer smaller amounts of data from one die to the other die i.e. for the purpose of synchronization.
Compared to the Wide serial Link, it has a relatively low bandwidth. The exact configuration is shown below.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>#Channels</td>
<td>1</td>
</tr>
<tr>
<td>#Lanes</td>
<td>8</td>
</tr>
<tr>
<td>#Wires</td>
<td>18</td>
</tr>
<tr>
<td>Max I/O clock frequency</td>
<td>250 MHz (default 125 MHz)</td>
</tr>
<tr>
<td>Max Bandwidth (duplex)</td>
<td>8 Gbps @ 250 MHz</td>
</tr>
</tbody>
</table>
<p>The Narrow Serial Link can be accessed with normal load stores and by setting the MSB+1 (used bits) bit of the address i.e. adding an offset of <code>0x100_0000_0000</code>. The entire address space of the other die is accessible this way.</p>
<table>
<thead>
<tr>
<th></th>
<th>Address</th>
</tr>
</thead>
<tbody>
<tr>
<td>Configuration register base address</td>
<td><code>0x0700_0000</code></td>
</tr>
<tr>
<td>Start address</td>
<td><code>0x100_0000_0000</code></td>
</tr>
<tr>
<td>End address</td>
<td><code>0x1ff_ffff_ffff</code></td>
</tr>
</tbody>
</table>
<p>The AXI interface of the Narrow Serial Link can be isolated with its <code>SERIAL_LINK_SINGLE_CHANNEL_CTRL</code> register. Further the Narrow Serial Link can be SW reset and clock gated.</p>
<h3 id="fpga-off-system-link">FPGA / Off-System Link</h3>
<p>The FPGA Serial Link is used to connect Occamy to the outside i.e. an FPGA board. This can be used for instance to preload binaries or employ applications remotely.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>#Channels</td>
<td>1</td>
</tr>
<tr>
<td>#Lanes</td>
<td>8</td>
</tr>
<tr>
<td>#Wires</td>
<td>18</td>
</tr>
<tr>
<td>Max I/O clock frequency</td>
<td>250 MHz (default 125 MHz)</td>
</tr>
<tr>
<td>Max Bandwidth (duplex)</td>
<td>8 Gbps @ 250 MHz</td>
</tr>
</tbody>
</table>
<p>The FPGA Serial Link is always-on and cannot be isolated, clock-gated. It is resetted with the global reset.</p>
<table>
<thead>
<tr>
<th></th>
<th>Address</th>
</tr>
</thead>
<tbody>
<tr>
<td>Configuration register base address</td>
<td><code>0x0500_0000</code></td>
</tr>
<tr>
<td>Start address</td>
<td><code>0x2000_0000</code></td>
</tr>
<tr>
<td>End address</td>
<td><code>0x6fff_ffff</code></td>
</tr>
</tbody>
</table>
<h2 id="cva6">CVA6</h2>
<p>Occamy features one CVA6 core that serves as a manager of the system.
CVA6 is an application-class, in-order, 64-bit RISC-V core.
It supports the RV64GC ISA, meaning that it can run a rich operating system such as Linux.
For more information on CVA6, refer to the <code>CVA6 GitHub repository</code> or its <code>user manual</code>.
This section documents <em>Occamy-specific</em> modifications and the configuration of CVA6.</p>
<h3 id="configuration">Configuration</h3>
<p><strong>CVA6 L1 data cache configuration</strong>
| Parameter       | Value      |
| --------------- | ---------- |
| Write policy    | Write-back |
| Size            |      2 KiB |
| Cacheline width |   16 bytes |
| Associativity   |      8-way |
| #Sets           |        256 |</p>
<p><strong>CVA6 L1 instruction cache configuration</strong>
| Parameter       | Value      |
| --------------- | ---------- |
| Size            |     16 KiB |
| Cacheline width |   16 bytes |
| Associativity   |      4-way |
| #Sets           |        256 |</p>
<p><strong>CVA6 branch predictors</strong>
| Component            | Configuration |
| -------------------- | ------------- |
| Return-address stack |     2 entries |
| Branch target buffer |    32 entries |
| Branch history table |   128 entries |</p>
<p><strong>CVA6 FPU configuration</strong>
| Parameter           | Value    |
| ------------------- | -------- |
| XF16                | disabled |
| XF16ALT             | disabled |
| XF8                 | disabled |
| XF8ALT              | disabled |
| XFVEC               | disabled |
| FP64 comp latency   | 3 cycles |
| Div/Sqrt latency    | 2 cycles |
| Non-comp latency    | 1 cycles |
| Conversion latency  | 2 cycles |
| Dot product latency | 2 cycles |</p>
<p><strong>Further CVA6 parameters</strong>
| Parameter                       | Value      |
| ------------------------------- | ---------- |
| Pysical memory protection (PMP) |  8 entries |
| Data TLB                        | 16 entries |
| Instruction TLB                 | 16 entries |</p>
<h3 id="physical-memory-attributes-pmas">Physical Memory Attributes (PMAs)</h3>
<table>
<thead>
<tr>
<th>Start</th>
<th>End</th>
<th>Description</th>
<th>Executable</th>
<th>Cached</th>
<th>Non-Idempotent</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0x0000_0000</code></td>
<td><code>0x0000_0fff</code></td>
<td>Debug module</td>
<td>yes</td>
<td>no</td>
<td>no</td>
</tr>
<tr>
<td><code>0x0000_1000</code></td>
<td><code>0x00ff_ffff</code></td>
<td><em>unmapped</em></td>
<td>no</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td><code>0x0100_0000</code></td>
<td><code>0x0101_ffff</code></td>
<td>Bootrom</td>
<td>yes</td>
<td>no</td>
<td>no</td>
</tr>
<tr>
<td><code>0x0102_0000</code></td>
<td><code>0x6fff_ffff</code></td>
<td>Peripherals</td>
<td>no</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td><code>0x7000_0000</code></td>
<td><code>0x7007_ffff</code></td>
<td>SPM</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td><code>0x7008_0000</code></td>
<td><code>0x7fff_ffff</code></td>
<td><em>unmapped</em></td>
<td>no</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td><code>0x8000_0000</code></td>
<td><code>0xffff_ffff</code></td>
<td>HBM 0,1</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td><code>0x1_0000_0000</code></td>
<td><code>0xf_ffff_ffff</code></td>
<td><em>unmapped</em></td>
<td>no</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td><code>0x10_0000_0000</code></td>
<td><code>0x11_ffff_ffff</code></td>
<td>HBM 0-7</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td><code>0x12_0000_0000</code></td>
<td><code>0xff_ffff_ffff</code></td>
<td><em>unmapped</em></td>
<td>no</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td><code>0x100_0000_0000</code></td>
<td><em>end</em></td>
<td><em>unmapped</em></td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
</tbody>
</table>
<h3 id="axi-interface">AXI Interface</h3>
<p>Compared to the upstream version of CVA6, a few minor custom modifications were done to its AXI interface.</p>
<ol>
<li>For compatibility with the remainder of the Occamy system, AXI requests by CVA6 are marked as <em>modifiable</em> (<code>ax.cache = 0x2</code>).</li>
<li>As for all cores within Occamy, the <code>user</code> signal of all AXI requests issued by CVA6 contains <code>hartid + 1</code>. This allows for scalable atomics support.</li>
</ol>
<h3 id="temporal-fence-instruction">Temporal Fence Instruction</h3>
<p>For experimental purposes, CVA6 in Occamy is extended by the custom temporal fence instruction (<code>fence.t</code>).
<code>fence.t</code> can be used to prevent on-core timing channels, as described in the  <code>fence.t paper</code>_.
<code>fence.t</code> is mapped to the opcode <code>0xfffff00b</code>.
Furthermore, two custom CSRs that configure <code>fence.t</code> are added to enable a history-independent context-switch latency:</p>
<table>
<thead>
<tr>
<th>CSR</th>
<th>Address</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>FENCE_T_PAD</code></td>
<td>0x702</td>
</tr>
<tr>
<td><code>FENCE_T_CEIL</code></td>
<td>0x703</td>
</tr>
</tbody>
</table>
<p><code>fence.t</code> will defer completion until <code>FENCE_T_PAD</code> cycles have passed since the most recent CLINT timer interrupt.</p>
<p>The <code>FENCE_T_CEIL</code> CSR serves for evaluation purposes and is subdivided into two fields:</p>
<table>
<thead>
<tr>
<th>Bit(s)</th>
<th>Field</th>
</tr>
</thead>
<tbody>
<tr>
<td>0 - 31</td>
<td><code>fence_t_ceil</code></td>
</tr>
<tr>
<td>32</td>
<td><code>fence_t_src_sel</code></td>
</tr>
<tr>
<td>33 - 63</td>
<td><em>Reserved</em></td>
</tr>
</tbody>
</table>
<p><code>fence_t_ceil</code> contains the greatest observed number of cycles between the most recent CLINT timer interrupt and the completion of <code>fence.t</code> <em>before</em> padding.
It is capped to <code>FENCE_T_PAD</code>.
It can be used to determine an upper bound of the context-switch latency and hence a suitable value for <code>FENCE_T_PAD</code>.</p>
<p>If <code>fence_t_src_sel</code> is set, <code>fence.t</code> will pad with respect to the most recent privilege switch from U-mode instead of the most recent CLINT timer interrupt.
This is required for performance estimations e.g., based on fast-path context switches, which are not triggered by a CLINT timer interrupt.</p>
<p><strong><em>Note:</em></strong> Setting <code>fence_t_src_sel</code> might render the security properties (history-independent context switch latency) of <code>fence.t</code> invalid and should only be used for performance evaluation.</p>
<ul>
<li>CVA6 GitHub repository: https://github.com/openhwgroup/cva6</li>
<li>user manual: https://docs.openhwgroup.org/projects/cva6-user-manual/</li>
<li>fence.t paper: https://doi.org/10.1109/TC.2022.3212636</li>
</ul>
<h2 id="system-level-dma">System-level DMA</h2>
<p>TODO</p>
<h2 id="system-memories">System Memories</h2>
<p>Occamy has three system-level memories plus the 8GB HBM2e memory:</p>
<table>
<thead>
<tr>
<th>Memory</th>
<th>Word width</th>
<th>Size</th>
<th>Start Address</th>
<th>End Address</th>
</tr>
</thead>
<tbody>
<tr>
<td>Narrow SPM</td>
<td>64-bit</td>
<td>512 KB</td>
<td>0x00_7000_0000</td>
<td>0x00_7007_ffff</td>
</tr>
<tr>
<td>Wide SPM</td>
<td>512-bit</td>
<td>1 MB</td>
<td>0x00_7100_0000</td>
<td>0x00_710f_ffff</td>
</tr>
<tr>
<td>Wide Zero Memory</td>
<td>512-bit</td>
<td>8 GB</td>
<td>0x01_0000_0000</td>
<td>0x02_ffff_ffff</td>
</tr>
<tr>
<td>HBM0</td>
<td>512-bit</td>
<td>1 GB</td>
<td>0x10_0000_0000</td>
<td>0x02_ffff_ffff</td>
</tr>
<tr>
<td>HBM0 alias</td>
<td>512-bit</td>
<td>1 GB</td>
<td>0x00_8000_0000</td>
<td>0x00_bfff_ffff</td>
</tr>
<tr>
<td>HBM1</td>
<td>512-bit</td>
<td>1 GB</td>
<td>0x10_4000_0000</td>
<td>0x02_ffff_ffff</td>
</tr>
<tr>
<td>HBM1 alias</td>
<td>512-bit</td>
<td>1 GB</td>
<td>0x00_c000_0000</td>
<td>0x00_ffff_ffff</td>
</tr>
<tr>
<td>HBM2</td>
<td>512-bit</td>
<td>1 GB</td>
<td>0x10_8000_0000</td>
<td>0x02_ffff_ffff</td>
</tr>
<tr>
<td>HBM3</td>
<td>512-bit</td>
<td>1 GB</td>
<td>0x10_c000_0000</td>
<td>0x02_ffff_ffff</td>
</tr>
<tr>
<td>HBM4</td>
<td>512-bit</td>
<td>1 GB</td>
<td>0x11_0000_0000</td>
<td>0x02_ffff_ffff</td>
</tr>
<tr>
<td>HBM5</td>
<td>512-bit</td>
<td>1 GB</td>
<td>0x11_4000_0000</td>
<td>0x02_ffff_ffff</td>
</tr>
<tr>
<td>HBM6</td>
<td>512-bit</td>
<td>1 GB</td>
<td>0x11_8000_0000</td>
<td>0x02_ffff_ffff</td>
</tr>
<tr>
<td>HBM7</td>
<td>512-bit</td>
<td>1 GB</td>
<td>0x11_c000_0000</td>
<td>0x02_ffff_ffff</td>
</tr>
</tbody>
</table>
<p>The Narrow SPM is mainly utilized by <code>CVA6</code>, the wide SPM can be used to store data or as a SW controlled data cache in front of the HBM.
The rather large memory range of 8GB of the Wide Zero Memory helps to preload the HBM with 0s to avoid ECC errors when accessing non-full words with the system-level DMA.</p>
<p>The 8GB HBM memory is by default a <em>continous</em> memory region where each bank has the size of 1GB.
By changing <code>INTERLEAVED_ENA</code> from <em>0</em> to <em>1</em>, the 8GB gets addressed in an interleaved fashion.</p>
<h2 id="axi-crossbars">AXI crossbar(s)</h2>
<p>TODO</p>
<h2 id="peripherals">Peripherals</h2>
<p>Occamy includes the following peripherals:</p>
<ul>
<li>bootrom</li>
<li>gpio</li>
<li>i2c</li>
<li>jtag</li>
<li>plic</li>
<li>clint</li>
<li>spi</li>
<li>timer</li>
<li>uart</li>
</ul>
<h2 id="soc-control-registers">SoC Control Registers</h2>
<p>TODO</p>
<h2 id="chip-control-registers">Chip Control Registers</h2>
<p>TODO</p>
<h2 id="control-register-files-overview">Control Register Files Overview</h2>
<p>TODO</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.a51614de.min.js"></script>
      
    
  </body>
</html>