{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "http://pulp-platform.org/snitch/occamy.schema.json",
    "title": "Occamy System Schema",
    "description": "Description of an Occamy-based system.",
    "type": "object",
    "required": [
        "cluster"
    ],
    "properties": {
        "cluster": {
            "$ref": "http://pulp-platform.org/snitch/snitch_cluster.schema.json"
        },
        "wide_xbar": {
            "$ref": "http://pulp-platform.org/snitch/axi_xbar.schema.json"
        },
        "narrow_xbar": {
            "$ref": "http://pulp-platform.org/snitch/axi_xbar.schema.json"
        },
        "nr_s1_quadrant": {
            "title": "Number of S1 Quadrants",
            "type": "integer",
            "default": 8
        },
        "s1_quadrant": {
            "title": "S1 Quadrant Properties",
            "type": "object",
            "properties": {
                "nr_clusters": {
                    "type": "integer",
                    "default": 4,
                    "description": "Number of clusters in an S1 quadrant."
                },
                "ro_cache_cfg": {
                    "type": "object",
                    "description": "Constant cache configuration.",
                    "properties": {
                        "max_trans": {
                            "type": "integer",
                            "description": "Maximum Outstanding Transaction",
                            "default": 4
                        },
                        "width": {
                            "type": "integer",
                            "description": "Cache Line Width"
                        },
                        "count": {
                            "type": "integer",
                            "description": "The number of cache lines per set. Power of two; >= 2."
                        },
                        "sets": {
                            "type": "integer",
                            "description": "The set associativity of the cache. Power of two; >= 1."
                        },
                        "address_regions": {
                            "type": "integer",
                            "description": "Number of programmable address regions.",
                            "default": 1
                        }
                    }
                },
                "wide_xbar": {
                    "$ref": "http://pulp-platform.org/snitch/axi_xbar.schema.json"
                },
                "narrow_xbar": {
                    "$ref": "http://pulp-platform.org/snitch/axi_xbar.schema.json"
                }
            }
        },
        "debug": {
            "type": "object",
            "description": "Debug module.",
            "default": {
                "address": 0,
                "length": 4096
            },
            "address": {
                "type": "number",
                "description": "Start address of Debug module address region.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of Debug module address region in bytes.",
                "minimum": 0
            }
        },
        "rom": {
            "type": "object",
            "description": "Read-only memory from which _all_ harts of the system start to boot.",
            "default": {
                "address": 16777216,
                "length": 131072
            },
            "address": {
                "type": "number",
                "description": "Start address of ROM.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of ROM in bytes.",
                "minimum": 0
            }
        },
        "soc_ctrl": {
            "type": "object",
            "description": "Registerfile to control the SoC area of the system.",
            "default": {
                "address": 33554432,
                "length": 4096
            },
            "address": {
                "type": "number",
                "description": "Start address of SOC_CTRL.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of SOC_CTRL in bytes.",
                "minimum": 0
            }
        },
        "clk_mgr": {
            "type": "object",
            "description": "Memory-mapped Clock Manager to configure the FLLs/PLLs.",
            "default": {
                "address": 33554432,
                "length": 4096
            },
            "address": {
                "type": "number",
                "description": "Start address of CLK_MGR.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of CLK_MGR in bytes.",
                "minimum": 0
            }
        },
        "uart": {
            "type": "object",
            "description": "Universal Asynchronous Receiver-Transmitter (UART).",
            "default": {
                "address": 33562624,
                "length": 4096
            },
            "address": {
                "type": "number",
                "description": "Start address of UART.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of UART in bytes.",
                "minimum": 0
            }
        },
        "GPIO": {
            "type": "object",
            "description": "General Purpose Input/Output.",
            "default": {
                "address": 33566720,
                "length": 4096
            },
            "address": {
                "type": "number",
                "description": "Start address of GPIO address region.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of GPIO address region in bytes.",
                "minimum": 0
            }
        },
        "I2C": {
            "type": "object",
            "description": "I2C controller.",
            "default": {
                "address": 33570816,
                "length": 4096
            },
            "address": {
                "type": "number",
                "description": "Start address of I2C.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of I2C in bytes.",
                "minimum": 0
            }
        },
        "chip_ctrl": {
            "type": "object",
            "description": "Registerfile to control the SoC area of the system.",
            "default": {
                "address": 33574912,
                "length": 4096
            },
            "address": {
                "type": "number",
                "description": "Start address of CHIP_CTRL.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of CHIP_CTRL in bytes.",
                "minimum": 0
            }
        },
        "timer": {
            "type": "object",
            "description": "32-bit wide timer.",
            "default": {
                "address": 33579008,
                "length": 4096
            },
            "address": {
                "type": "number",
                "description": "Start address of I2C.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of UARI2CT in bytes.",
                "minimum": 0
            }
        },
        "spim": {
            "type": "object",
            "description": "Serial Peripheral Interface Master.",
            "default": {
                "address": 50331648,
                "length": 131072
            },
            "address": {
                "type": "number",
                "description": "Start address of SPIM.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of SPIM in bytes.",
                "minimum": 0
            }
        },
        "clint": {
            "type": "object",
            "description": "Core-local Interrupt Controller (CLINT).",
            "default": {
                "address": 67108864,
                "length": 1048576
            },
            "address": {
                "type": "number",
                "description": "Start address of CLINT.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of CLINT in bytes.",
                "minimum": 0
            }
        },
        "pcie_cfg": {
            "type": "object",
            "description": "Registerfile to configure the PCIE / serial link.",
            "default": {
                "address": 83886080,
                "length": 131072
            },
            "address": {
                "type": "number",
                "description": "Start address of PCIE_CFG.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of PCIE_CFG in bytes.",
                "minimum": 0
            }
        },
        "hbi_cfg": {
            "type": "object",
            "description": "Registerfile to configure the High-Bandwidth Interconnect.",
            "default": {
                "address": 83886080,
                "length": 131072
            },
            "address": {
                "type": "number",
                "description": "Start address of HBI_CFG.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of HBI_CFG in bytes.",
                "minimum": 0
            }
        },
        "hbi_ctl": {
            "type": "object",
            "description": "Registerfile to control the High-Bandwidth Interconnect.",
            "default": {
                "address": 117440512,
                "length": 65536
            },
            "address": {
                "type": "number",
                "description": "Start address of HBI_CTL.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of HBI_CTL in bytes.",
                "minimum": 0
            }
        },
        "hbm_cfg": {
            "type": "object",
            "description": "Registerfile to control the High Bandwidth Memory controller.",
            "default": {
                "address": 134217728,
                "length": 4194304
            },
            "address": {
                "type": "number",
                "description": "Start address of HBM_CFG.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of HBM_CFG in bytes.",
                "minimum": 0
            }
        },
        "hbm_phy_cfg": {
            "type": "object",
            "description": "Registerfile to control the High Bandwidth Memory PHY.",
            "default": {
                "address": 150994944,
                "length": 1048576
            },
            "address": {
                "type": "number",
                "description": "Start address of HBM_PHY_CFG.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of HBM_PHY_CFG in bytes.",
                "minimum": 0
            }
        },
        "hbm_seq": {
            "type": "object",
            "description": "Registerfile to control the High Bandwidth Memory PHY.",
            "default": {
                "address": 167772160,
                "length": 65536
            },
            "address": {
                "type": "number",
                "description": "Start address of HBM_PHY_CFG.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of HBM_PHY_CFG in bytes.",
                "minimum": 0
            }
        },
        "plic": {
            "type": "object",
            "description": "Platform-Level Interrupt Controller (PLIC).",
            "default": {
                "address": 201326592,
                "length": 67108864
            },
            "address": {
                "type": "number",
                "description": "Start address of PLIC.",
                "minimum": 0
            },
            "length": {
                "type": "number",
                "description": "Total size of PLIC in bytes.",
                "minimum": 0
            }
        },
        "spm": {
            "description": "Scratchpad Memory (SPM).",
            "default": {
                "address": 1879048192,
                "length": 131072
            },
            "properties": {
                "address": {
                    "type": "number",
                    "description": "Start address of SPM (Scratchpad Memory).",
                    "minimum": 0
                },
                "length": {
                    "type": "number",
                    "description": "Size of SPM based on the address range. The full address range will be mapped to SPM.",
                    "examples": [
                        131072
                    ],
                    "minimum": 0
                }
            }
        },
        "pcie": {
            "description": "Peripheral Component Interconnect Express or simply a Serial Link.",
            "default": {
                "address_io": 536870912,
                "address_mm": 1207959552,
                "length": 671088640
            },
            "properties": {
                "address_io": {
                    "type": "number",
                    "description": "Start address of PCIE IO mapped region.",
                    "minimum": 0
                },
                "address_mm": {
                    "type": "number",
                    "description": "Start address of PCIE memory mapped region.",
                    "minimum": 0
                },
                "length": {
                    "type": "number",
                    "description": "Size of both PCIE address regions.",
                    "examples": [
                        671088640
                    ],
                    "minimum": 0
                }
            }
        },
        "hbi": {
            "description": "High-Bandwidth Interconnect (HBI).",
            "default": {
                "address": 1099511627776,
                "length": 1099511627776
            },
            "properties": {
                "address": {
                    "type": "number",
                    "description": "Start address of HBI.",
                    "minimum": 0
                },
                "length": {
                    "type": "number",
                    "description": "Size of HBI.",
                    "minimum": 0
                }
            }
        },
        "hbm": {
            "description": "High Bandwidth Memory (HBM).",
            "default": {
                "address_0": 2147483648,
                "address_1": 1099511627776,
                "channel_size": 1073741824,
                "nr_channels_total": 8,
                "nr_channels_address_0": 2
            },
            "properties": {
                "address_0": {
                    "type": "number",
                    "description": "Start address of first memory region of HBM.",
                    "minimum": 0
                },
                "address_1": {
                    "type": "number",
                    "description": "Start address of second memory region of HB.",
                    "minimum": 0
                },
                "nr_channels_total": {
                    "type": "number",
                    "description": "Total number of HBM channels (all are mapped onto region of address_1.",
                    "minimum": 0
                },
                "nr_channels_address_0": {
                    "type": "number",
                    "description": "Number of HBM channels mapped onto address_0.",
                    "minimum": 0
                },
                "channel_size": {
                    "type": "number",
                    "description": "Size of a single HBM channel in bytes.",
                    "minimum": 0
                }
            }
        },
        "dram": {
            "description": "DRAM memory. DRAM address range usually corresponds to 'hbm address_0' and 'nr_channels_address_0'.",
            "default": {
                "address": 2147483648,
                "length": 2147483648
            },
            "properties": {
                "address": {
                    "type": "number",
                    "description": "Start address of DRAM address region.",
                    "minimum": 0
                },
                "length": {
                    "type": "number",
                    "description": "Size of DRAM address region.",
                    "minimum": 0
                }
            }
        }
    }
}
